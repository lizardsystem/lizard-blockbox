{% extends "lizard_map/wms.html" %}{% load i18n %}

{% block javascript %}
   {{ block.super }}

    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/flot/jquery.flot.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/flot/jquery.flot.symbol.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/underscore.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/backbone.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}deltaportaal/chosen.jquery.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/jquery.tablesorter.js">
    </script>

{% endblock %}

{% block map-javascript %}
    {{ block.super }}
    <!--[if lte IE 8]>
    <script type="text/javascript" src="{{ STATIC_URL }}lizard_blockbox/flot/excanvas.min.js"></script>
    <![endif]-->
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/blockbox.js">
    </script>
{% endblock %}

{% block css %}
  {{ block.super }}
  <link rel="stylesheet"
        href="{{ STATIC_URL }}lizard_blockbox/lizard_blockbox.less"
        type="text/less"
        media="screen, projection" />
  <link rel="stylesheet"
        href="{{ STATIC_URL }}deltaportaal/chosen.css"
        type="text/less"
        media="screen, projection" />
{% endblock css %}

{% block sidebar %}
    <h2>Rivierselectie</h2>
    <p class="muted">
      Opmerking: op het moment werkt alleen de Maas.
    </p>
    <form>
      <select data-placeholder="Kies een rivier"
              class="chzn-select"
              tabindex="2"
              style="width:250px;">
		{% for reach in view.reaches %}
          <option {% if reach.selected %}SELECTED{% endif %}
		  >{{ reach.name }}</option>
		{% endfor %}
      </select>
    </form>

    <h3>Geselecteerde maatregelen</h3>
    <p class="muted">
      Klik om ze te deselecteren.
    </p>
    <ul id="selected-measures-list" class="without-bullets">
      {% for measure in view.selected_measures %}
        <li>
          <a href="#"
             class="sidebar-measure blockbox-toggle-measure padded-sidebar-item"
             data-measure-id="{{ measure.short_name }}"
             data-measure-shortname="{{ measure.short_name }}">
            {% firstof measure.name measure.short_name %}
          </a>
        </li>
      {% endfor %}
    </ul>
{% endblock %}

{% block content %}
  <div id="lizard-blockbox-graph" class="i-have-height"
	   style="margin-left:5px;" data-static-url="{{ STATIC_URL }}">
    {% block lizard-blockbox-graph %}

    <div id="placeholder_top_legend"
         style="width:98%;height:0px;"></div>

    <div id="placeholder_top"
         style="width:98%;height:150px;"></div>
    <!-- placeholder_top is the actual graph. -->

    <div id="placeholder_control"
         style="width:98%;height:100px;border-bottom:1px solid #ccc;"></div>

    <!-- placeholder_control is the graph part with the measures. -->

    <!-- <div id="placeholder_control_legend"
         style="width:98%;height:0px;"></div> -->
    <!-- Note: this placeholder_control_legend isn't shown right now. -->
    {% endblock %}
  </div>

  <div id="blockbox-table"
       data-measure-toggle-url="{% url lizard_blockbox_toggle_measure %}"
       data-calculated-measures-url="{% url calculated_measures_json %}"
       data-measure-list-url="{% url measure_list_json %}">
    <h2>Alle maatregelen</h2>
    <table id="measures-table-top"
	   class="table table-striped table-bordered">
      <thead>
        <tr><th>Naam</th><th>Type</th><th>Start km</th><th>PDF</th></tr>
      </thead>
      <tbody id="measures-table">
        {% for measure in view.measures %}
          <tr>
            <td style="cursor:pointer;">
              <a href="#"
                 class="blockbox-toggle-measure"
                 data-measure-id="{{ measure.short_name }}">
                {{ measure.name }}
                </a>
            </td>
            <td>
               {{ measure.measure_type }}
            </td>
            <td>
                {{ measure.km_from }}
            </td>
			<td>
			  {% if measure.pdf %}
			    <a href="{% url measure_factsheet measure=measure.short_name %}">
				  ICOON</a>
			  {% else %}
				NOTHING
			  {% endif %}
			</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {{ block.super }}
{% endblock %}

{% block orthogonal-actions %}
{% endblock %}


{% block content-actions %}

{# A place to add the river selection dropdown? #}

{{ block.super }}
{% endblock %}
