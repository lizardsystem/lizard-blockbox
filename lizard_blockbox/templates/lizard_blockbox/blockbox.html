{% extends "lizard_map/wms.html" %}{% load i18n %}

{% block javascript %}
   {{ block.super }}

    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/flot/jquery.flot.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/flot/jquery.flot.symbol.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/underscore.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/backbone.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}deltaportaal/chosen.jquery.js">
    </script>
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/jquery.tablesorter.js">
    </script>

{% endblock %}

{% block map-javascript %}
    {{ block.super }}
    <!--[if lte IE 8]>
    <script type="text/javascript" src="{{ STATIC_URL }}lizard_blockbox/flot/excanvas.min.js"></script>
    <![endif]-->
    <script type="text/javascript"
        src="{{ STATIC_URL }}lizard_blockbox/blockbox.js">
    </script>
{% endblock %}

{% block css %}
  {{ block.super }}
  <link rel="stylesheet"
        href="{{ STATIC_URL }}lizard_blockbox/lizard_blockbox.css"
        type="text/css"
        media="screen, projection" />
  <link rel="stylesheet"
        href="{{ STATIC_URL }}deltaportaal/chosen.css"
        type="text/css"
        media="screen, projection" />
{% endblock css %}

{% block sidebar %}
    <h2>Rivierselectie</h2>
	<span>Selecteer een rivier:</span>
    <form id="blockbox-river"
		  data-select-river-url="{% url lizard_blockbox_select_river %}">
	  <select data-placeholder="Kies een rivier"
			  class="chzn-select"
			  tabindex="2"
			  style="width:250px;">
		{% for reach in view.reaches %}
        <option {% if reach.selected %}SELECTED{% endif %}
				>{{ reach.name }}</option>
		{% endfor %}
	  </select>
    </form>

    <h3>Geselecteerde maatregelen</h3>
    <p class="muted">
      Klik om een maatregel om hem te deselecteren.
    </p>
    <ul id="selected-measures-list" class="without-bullets">
      {% for measure in view.selected_measures %}
        <li>
          <a href="#"
             class="sidebar-measure blockbox-toggle-measure padded-sidebar-item"
             data-measure-id="{{ measure.short_name }}"
             data-measure-shortname="{{ measure.short_name }}">
            {% firstof measure.name measure.short_name %}
          </a>
        </li>
      {% endfor %}
    </ul>
    <hr />
    <p class="muted">
      Ga naar de <a href="{% url lizard_blockbox.selected_measures %}">
        overzichtspagina over de geselecteerde maatregelen
      </a> voor meer informatie. Hier kunt u de gekozen set ook bewaren.
    </p>

{% endblock %}

{% block content %}
  <div id="lizard-blockbox-graph" class="i-have-height"
	   style="margin-left:5px;" data-static-url="{{ STATIC_URL }}">
    {% block lizard-blockbox-graph %}

    <div id="placeholder_top_legend"
         style="width:98%;height:0px;"></div>

    <div id="placeholder_top"
         style="width:98%;height:150px;"></div>
    <!-- placeholder_top is the actual graph. -->

    <div id="placeholder_control"
         style="width:98%;height:100px;border-bottom:1px solid #ccc;"></div>

    <!-- placeholder_control is the graph part with the measures. -->

    <!-- <div id="placeholder_control_legend"
         style="width:98%;height:0px;"></div> -->
    <!-- Note: this placeholder_control_legend isn't shown right now. -->
    {% endblock %}
  </div>

  <div id="blockbox-table"
       data-measure-toggle-url="{% url lizard_blockbox_toggle_measure %}"
       data-calculated-measures-url="{% url calculated_measures_json %}"
       data-measure-list-url="{% url measure_list_json %}">
    <h2>Alle maatregelen</h2>
    <table id="measures-table-top"
	   class="table table-striped table-bordered">
      <thead>
        <tr>
          {% for header in view.measure_headers %}
            <th>{{ header }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody id="measures-table">
        {% for measure in view.measures %}
          <tr>
            <td style="cursor:pointer;">
              <a href="#"
                 class="blockbox-toggle-measure"
                 data-measure-id="{{ measure.short_name }}">
                {{ measure.name }}
                </a>
            </td>
            {% for field in measure.fields %}
              <td>{% firstof field.value "Onbekend" %}</td>
            {% endfor %}
	    <td>
	      {% if measure.pdf_link %}
	        <a href="{{ measure.pdf_link }}">
		  <i class="icon-file"></i>Download
                </a>
	      {% endif %}
	    </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  {{ block.super }}
{% endblock %}


{% block orthogonal-actions %}
  {% include "lizard_blockbox/scenario-actions.html" %}
{% endblock orthogonal-actions %}
